---
title: File Handling in C
description: Learn how to open, read, write, and manage files in C.
author: CSExplore Team
---

# üìÇ File Handling in C  

## üìñ The Tale of Data Persistence  

Imagine you‚Äôre working on a **banking system** that stores customer transactions. If the data is stored only in memory, it will be **lost when the program exits**. To make it **permanent**, we need **files** to store and retrieve data whenever needed.  

In this module, we‚Äôll explore **how to open and close files, read and write data, and use different file modes**. By the end, you‚Äôll be able to **manage data like a pro!** üöÄ  

## üîπ Opening & Closing Files  

In C, file handling is done using the `FILE` pointer from the `<stdio.h>` library.  

### **Opening a File**  

To open a file, we use the `fopen()` function.  

<CodeBlock language="c">
{
`#include <stdio.h>

int main() {
    FILE *file;

    // Open file in write mode
    file = fopen("data.txt", "w");

    if (file == NULL) {
        printf("Error opening file!\\n");
        return 1;
    }

    printf("File opened successfully!\\n");
    
    fclose(file); // Close the file
    return 0;
}`
}
</CodeBlock>  

### **Closing a File**  

After working with a file, always **close it using `fclose()`** to free up system resources.  

<CodeBlock language="c">
{
`fclose(file); // Close the file`
}
</CodeBlock>  


## ‚úçÔ∏è Reading & Writing Files  

There are two primary ways to handle files:  
- **Text Mode** (default, human-readable)  
- **Binary Mode** (efficient for non-text data like images, videos)  

### **Writing to a File (`fprintf`)**  

To store data in a file, we use `fprintf()`.  

<CodeBlock language="c">
{
`#include <stdio.h>

int main() {
    FILE *file = fopen("data.txt", "w");

    if (file == NULL) {
        printf("Error opening file!\\n");
        return 1;
    }

    fprintf(file, "Hello, World!\\n"); // Write data to file

    fclose(file);
    printf("Data written successfully!\\n");

    return 0;
}`
}
</CodeBlock>  

### **Reading from a File (`fscanf`)**  

To retrieve data, we use `fscanf()`.  

<CodeBlock language="c">
{
`#include <stdio.h>

int main() {
    FILE *file = fopen("data.txt", "r");
    char str[100];

    if (file == NULL) {
        printf("Error opening file!\\n");
        return 1;
    }

    fscanf(file, "%[^\\n]", str); // Read data from file
    printf("Read from file: %s\\n", str);

    fclose(file);
    return 0;
}`
}
</CodeBlock>  

## üìú File Modes & Operations  

Each file mode defines how the file is accessed. Here‚Äôs a quick reference:  

| Mode  | Description |
|-------|------------|
| `"r"` | Read mode (file must exist) |
| `"w"` | Write mode (creates new file or erases existing content) |
| `"a"` | Append mode (adds data without erasing existing content) |
| `"r+"` | Read & write mode (file must exist) |
| `"w+"` | Read & write mode (creates new file or erases existing content) |
| `"a+"` | Append & read mode (preserves existing content) |

üí° **Tip:** Use `"a+"` if you want to add new data without deleting previous content.

## üîÑ Advanced File Operations  

### **Appending Data to a File**  

To **add new content** to an existing file, open it in `"a"` (append) mode.  

<CodeBlock language="c">
{
`#include <stdio.h>

int main() {
    FILE *file = fopen("data.txt", "a");

    if (file == NULL) {
        printf("Error opening file!\\n");
        return 1;
    }

    fprintf(file, "Appending new content!\\n");

    fclose(file);
    printf("Data appended successfully!\\n");

    return 0;
}`
}
</CodeBlock>  

### **Reading an Entire File (`fgets`)**  

To read **multiple lines**, use `fgets()`.  

<CodeBlock language="c">
{
`#include <stdio.h>

int main() {
    FILE *file = fopen("data.txt", "r");
    char buffer[255];

    if (file == NULL) {
        printf("Error opening file!\\n");
        return 1;
    }

    while (fgets(buffer, sizeof(buffer), file) != NULL) {
        printf("%s", buffer); // Print each line
    }

    fclose(file);
    return 0;
}`
}
</CodeBlock>  

### **Binary File Handling (`fwrite` & `fread`)**  

To store **structured data efficiently**, we use **binary mode (`wb`, `rb`)**.

#### Writing a Struct to a Binary File  

<CodeBlock language="c">
{
`#include <stdio.h>

struct Student {
    char name[50];
    int age;
    float marks;
};

int main() {
    struct Student s1 = {"Alice", 20, 85.5};
    FILE *file = fopen("student.dat", "wb");

    if (file == NULL) {
        printf("Error opening file!\\n");
        return 1;
    }

    fwrite(&s1, sizeof(struct Student), 1, file); // Write struct to file

    fclose(file);
    printf("Data written in binary mode!\\n");

    return 0;
}`
}
</CodeBlock>  

#### Reading a Struct from a Binary File  

<CodeBlock language="c">
{
`#include <stdio.h>

struct Student {
    char name[50];
    int age;
    float marks;
};

int main() {
    struct Student s1;
    FILE *file = fopen("student.dat", "rb");

    if (file == NULL) {
        printf("Error opening file!\\n");
        return 1;
    }

    fread(&s1, sizeof(struct Student), 1, file); // Read struct from file
    printf("Name: %s, Age: %d, Marks: %.2f\\n", s1.name, s1.age, s1.marks);

    fclose(file);
    return 0;
}`
}
</CodeBlock>  

With this knowledge, you can now **store, modify, and manage data persistently!** üöÄ  

üõ†Ô∏è **Next up:** **Mastering Data Structures in C!** üìä  
